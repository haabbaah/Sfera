<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
	<link rel="stylesheet" href="../shares/style.css">

	<style>
		.drag-and-drop {
margin-top: 20%;
}

.sf-1 {
top: 55%;
left: 26%;
width: 19%;
height: 26%;
}

.sf-2 {
top: 60%;
left: -3%;
width: 19%;
height: 26%;
}

.sf-3 {
top: -17%;
left: 33%;
width: 19%;
height: 26%;
}

.sf-4 {
top: 13%;
left: 38%;
width: 19%;
height: 26%;
}

.sf-5 {
top: 8%;
left: -5%;
width: 19%;
height: 26%;
}


.change-suit .change-0 {
background-image: url(img/btn/btn1.png);
}

.change-suit .change-1 {
background-image: url(img/btn/btn2.png);
}

.change-suit .change-2 {
background-image: url(img/btn/btn3.png);
}

.change-suit .change-3 {
background-image: url(img/btn/btn4.png);
}


.wrapper-dad-field  {
margin: 0;
}

.btn-dad-1 {
position: absolute;
top: 66%;
left: 34%;
width: 6%;
}

.btn-dad-2 {
position: absolute;
top: 62.5%;
left: 58%;
width: 10%;
}

.wrapper-dad-field{
	position: absolute;
	top: 61.5%;
	left: 0%;
	width: 100%;
}

.padding-hack{
position: relative;
width: 20%;
margin: 0 3%;
}
.padding-hack::before{
content: '';
display: block;
padding-top: 100%;
}

.wrapper-dad-field .dad-field {
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
width: 100%;
height: 100%;
}


	</style>
</head>

<body>


	<section class="window">

		<div class="navigation">
			<div class="controls-btn  btn-click-prev d-n">
				<svg class="svg-click-prev" viewBox="0 0 230 230" preserveAspectRatio="xMidYMin slice">
					<path d="M 230.76331,221.07365 136.6472,220.98557 27.785303,109.51394 138.50997,-0.86087097 232.13353,-0.82572875 123.61862,109.99207 Z">
				</svg>
			</div>
			<div class="controls-btn btn-click-start">
				<svg class="svg-click-start" viewBox="0 0 230 230" preserveAspectRatio="xMidYMin slice">
					<path d="M 26.702059,59.447527 109.85682,0.48324162 110.61277,28.831455 145.0086,28.453479 c 0,0 84.67168,2.946672 87.69048,90.336311 2.01405,58.30353 -28.80275,75.89686 -39.46609,85.75473 -10.66334,9.85787 -38.77498,15.0542 -38.77498,15.0542 L 38.41932,219.33145 v -54.42857 h 114.14881 c 0,0 31.28921,-5.32834 29.59285,-42.44404 C 180.46462,85.343139 151.4342,82.126097 151.4342,82.126097 h -41.1994 v 29.482143 z">
				</svg>
			</div>
			<div class="controls-btn btn-click-next">
				<svg class="svg-click-next" viewBox="0 0 230 230" preserveAspectRatio="xMidYMin slice">
					<path d="M 29.490733,-0.96457258 123.60611,-1.3466068 233.02345,109.57987 122.85149,220.50637 29.22892,220.93888 137.18895,109.58043 Z">
				</svg>
			</div>
		</div>

		<div class="interactive-field">


			<div class="item">
				<div class="grid">
					<div class="color-change">
						<div class="wrapp-video">
							<div class="video-item left-item">
								<video class="change-video d-n" data-change="" width="100%" height="auto" preload="auto" poster="video/pl4.jpg"
								 playsinline>
									<source src="video/l4.mp4" type="video/mp4">
									</source>
								</video>
								<video class="change-video d-n" data-change="yes1" width="100%" height="auto" preload="auto" poster="video/pl3.jpg"
								 playsinline>
									<source src="video/l3.mp4" type="video/mp4">
									</source>
								</video>
								<video class="change-video d-n" data-change="" width="100%" height="auto" preload="auto" poster="video/pl2.jpg"
								 playsinline>
									<source src="video/l2.mp4" type="video/mp4">
									</source>
								</video>
								<video class="change-video d-n" data-change="" width="100%" height="auto" preload="auto" poster="video/pl1.jpg"
								 playsinline>
									<source src="video/l1.mp4" type="video/mp4">
									</source>
								</video>
								<video class="change-video" width="100%" height="auto" preload="auto" poster="video/pl0.jpg" playsinline>
									<source src="video/l0.mp4" type="video/mp4">
									</source>
								</video>
							</div>

							<div class="video-item right-item">
								<video class="change-video d-n" data-change="yes2" width="100%" height="auto" preload="auto" poster="video/pr4.jpg"
								 playsinline>
									<source src="video/r4.mp4" type="video/mp4">
									</source>
								</video>
								<video class="change-video d-n" data-change="" width="100%" height="auto" preload="auto" poster="video/pr3.jpg"
								 playsinline>
									<source src="video/r3.mp4" type="video/mp4">
									</source>
								</video>
								<video class="change-video d-n" data-change="" width="100%" height="auto" preload="auto" poster="video/pr2.jpg"
								 playsinline>
									<source src="video/r2.mp4" type="video/mp4">
									</source>
								</video>
								<video class="change-video d-n" data-change="" width="100%" height="auto" preload="auto" poster="video/pr1.jpg"
								 playsinline>
									<source src="video/r1.mp4" type="video/mp4">
									</source>
								</video>
								<video class="change-video" width="100%" height="auto" preload="auto" poster="video/pr0.jpg" playsinline>
									<source src="video/r0.mp4" type="video/mp4">
									</source>
								</video>
							</div>
						</div>

						<div class="change-suit">
							<div class="btn-change change-3" data-change="yes2">

							</div>
							<div class="btn-change change-2" data-change="yes1">

							</div>
							<div class="btn-change change-1" data-change="">

							</div>
							<div class="btn-change change-0" data-change="">

							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="item">
				<div class="grid">
					<div class="drag-and-drop-invisible">

						<div class="video-animation">
							<div class="video-item" data-drag="2">
								<video class="video-invisible" data-drag="2" data-amount="3" width="100%" height="auto" preload="auto" poster="video/pl3.jpg"
								 playsinline>
									<source src="video/l3.mp4" type="video/mp4">
									</source>
								</video>
							</div>
							<div class="video-item" data-drag="1">
								<video class="video-invisible" data-drag="1" data-amount="6" width="100%" height="auto" preload="auto" poster="video/pr4.jpg"
								 playsinline>
									<source src="video/r4.mp4" type="video/mp4">
									</source>
								</video>
							</div>
						</div>


						<div class="wrapper-dad-field">
							<div class="padding-hack">
								<div class="dad-field">

								</div>
							</div>
							<div class="padding-hack">
								<div class="dad-field">

								</div>
							</div>
						</div>



						<div class="wrapper-btn-dad">
							<!-- 	<img class="btn-dad btn-dad-1 draggable op" src="img/bl/b8.png" data-drag="1">
							<img class="btn-dad btn-dad-1 draggable op" src="img/bl/b7.png" data-drag="1"> -->
							<img class="btn-dad btn-dad-1 draggable op" src="img/bl/b6.png" data-drag="1">
							<img class="btn-dad btn-dad-1 draggable op" src="img/bl/b5.png" data-drag="1">
							<img class="btn-dad btn-dad-1 draggable op" src="img/bl/b4.png" data-drag="1">
							<img class="btn-dad btn-dad-1 draggable op" src="img/bl/b3.png" data-drag="1">
							<img class="btn-dad btn-dad-1 draggable op" src="img/bl/b2.png" data-drag="1">
							<img class="btn-dad btn-dad-1 draggable" src="img/bl/b1.png" data-drag="1">
						</div>

						<div class="wrapper-btn-dad">
							<!-- 	<img class="btn-dad btn-dad-2 draggable op" src="img/bl/b8.png" data-drag="2">
							<img class="btn-dad btn-dad-2 draggable op" src="img/bl/b7.png" data-drag="2">
							<img class="btn-dad btn-dad-2 draggable op" src="img/bl/b6.png" data-drag="2">
							<img class="btn-dad btn-dad-2 draggable op" src="img/bl/b5.png" data-drag="2">
							<img class="btn-dad btn-dad-2 draggable op" src="img/bl/b4.png" data-drag="2"> -->
							<img class="btn-dad btn-dad-2 draggable op" src="img/bl/b3.png" data-drag="2">
							<img class="btn-dad btn-dad-2 draggable op" src="img/bl/b2.png" data-drag="2">
							<img class="btn-dad btn-dad-2 draggable" src="img/bl/b1.png" data-drag="2">
						</div>


					</div>
				</div>

			</div>



			<div class="item">
				2
			</div>

		</div>

		<div class="progress">
			<div class="dots-items">
				<div class="dots-wrapper">

				</div>
			</div>
		</div>

	</section>

	<section class="audio-files" style="display: flex; flex-direction: column;">
		<audio class="audio-question" id="fist-audio">
			<source src="audio/3-01.mp3" type="audio/mpeg">
		</audio>
		<audio class="audio-question">
			<source src="audio/3-02.mp3" type="audio/mpeg">
		</audio>
		<audio class="audio-question">
			<source src="audio/3-03.mp3" type="audio/mpeg">
		</audio>

	</section>




	<section class="audio-files" style="display: flex; flex-direction: column;">
		<div class="corect-audio-with-boom">
			<audio class="audio-answer">
				<source src="../shares/answer_sound/positive/yes-01.mp3" type="audio/mpeg">
			</audio>
			<audio class="audio-answer">
				<source src="../shares/answer_sound/positive/yes-02.mp3" type="audio/mpeg">
			</audio>
			<audio class="audio-answer">
				<source src="../shares/answer_sound/positive/yes-03.mp3" type="audio/mpeg">
			</audio>
			<audio class="audio-answer">
				<source src="../shares/answer_sound/positive/yes-04.mp3" type="audio/mpeg">
			</audio>
			<audio class="audio-answer">
				<source src="../shares/answer_sound/positive/yes-05.mp3" type="audio/mpeg">
			</audio>
			<audio class="audio-answer">
				<source src="../shares/answer_sound/positive/yes-06.mp3" type="audio/mpeg">
			</audio>
		</div>

		<div class="wrong-audio-with-boom">
			<audio class="audio-answer">
				<source src="../shares/answer_sound/negative/no-01.mp3" type="audio/mpeg">
			</audio>
			<audio class="audio-answer">
				<source src="../shares/answer_sound/negative/no-02.mp3" type="audio/mpeg">
			</audio>
		</div>



		<div class="final-audio">
			<audio class="audio-answer">
				<source src="../shares/answer_sound/final.mp3" type="audio/mpeg">
			</audio>
		</div>

		<div class="click-audio">
			<audio class="audio-answer">
				<source src="../shares/answer_sound/click.mp3" type="audio/mpeg">
			</audio>
		</div>

	</section>




	<!-- 	<script src="../shares/plugins/jquery.min.js"></script> -->
	<script src="../shares/interactive.js"></script>
	<script src="../shares/plugins/DragAndDrop/interact.min.js"></script>




	<script>
		var changeColor = new ChangeColor({
			changeVideo: '.interactive-field .change-video', //Видео с анимацией
			btnChange: '.interactive-field .btn-change', //Кнопки смены видео
			sumTrue: 2, //Количество верных ответов
		});

		var dragAndDropInvisible = new DragAndDropInvisible({
			dadElements: '.interactive-field .btn-dad', //Перетаскиваемые элементы
			fieldForDadElements: '.interactive-field .video-item', //Поля на которые перетаскиваются элементы
			actionAnimation: '.interactive-field .video-invisible' //Анимируемые выдео
		});


		/* ------------------------------------------------------------------------------ */

		field.changeField.addEventListener('touchstart', function (event) { //Смена цвета клик на видео
			if (event.targetTouches.length == 1) {
				var target = event.targetTouches[0].target;
				while (target != field.changeField) {
					if (target.classList.contains('change-video')) {
						// нашли элемент, который нас интересует!
						field.playThisVideo.call(target);
						//changeColor.addValueInFirst(this, this.getAttribute('data-change'));
						changeColor.addParent(target);
						return;
					}
					target = target.parentNode;
				}
			}
		}, false);


		field.changeField.addEventListener('touchstart', function (event) { //Смена цвета клик на кнопки
			if (event.targetTouches.length == 1) {
				var target = event.targetTouches[0].target;
				while (target != field.changeField) {
					if (target.classList.contains('btn-change')) {
						// нашли элемент, который нас интересует!
						changeColor.addClassOneElement.call(target, '.interactive-field .btn-change', 'big-btn');
						changeColor.addValueInSecond(target.getAttribute('data-change'));
						changeColor.checkChangeElements(target);
						return;
					}
					target = target.parentNode;
				}
			}
		}, false);


		/* ------------------------------------------------------------------------------ */

		field.changeField.addEventListener('touchstart', function (event) { //Перетаскивание элементов
			if (event.targetTouches.length == 1) {
				event.preventDefault();
				var target = event.targetTouches[0].target;
				while (target != field.changeField) {
					if (target.classList.contains('btn-dad')) {
						// нашли элемент, который нас интересует!
						target.addEventListener('touchend', function () { //Хак с добавлением touchend
							dragAndDropInvisible.checkUnderElement(target);
						}, false);
						setTimeout(function () {
							dragAndDropInvisible.showDadElements.call(target);
						}, 300)
						return;
					}
					target = target.parentNode;
				}
			}
		}, false);





















		interact('.draggable')
			.draggable({
				restrict: {
					restriction: '.interactive-field',
					endOnly: true,
				},
				// call this function on every dragmove event
				onmove: dragMoveListener,
				// call this function on every dragend event
				onend: function (event) {
					//console.log(event.target.clientX);
				}
			});

		function dragMoveListener(event) {
			var target = event.target,
				// keep the dragged position in the data-x/data-y attributes
				x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
				y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

			// translate the element
			//target.style.webkitTransform =
			target.style.transform =
				'translate(' + x + 'px, ' + y + 'px)';

			// update the posiion attributes
			target.setAttribute('data-x', x);
			target.setAttribute('data-y', y);
		}
		// this is used later in the resizing and gesture demos
		window.dragMoveListener = dragMoveListener;
	</script>

</body>

</html>